(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.svgKnob=b():a.svgKnob=b()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)}([function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0}),b.default=function(a){function b(){var a=Math.acos;c.center_zero&&!c.center_value&&(c.center_value=d((c.value_max-c.value_min)/2+c.value_min)),h(c.initial_value?c.initial_value:c.default_value),'butt'===c.linecap?(aa=l(180*a(-c.center_gap/100)/K),ba=l(180*a(c.center_gap/100)/K)):(aa=l(180*a(-(1.3*c.track_width+c.center_gap)/100)/K),ba=l(180*a((1.3*c.track_width+c.center_gap)/100)/K))}function d(a){return null===c.value_resolution?a:Math.round(a/c.value_resolution)*c.value_resolution}function f(a){var b=g(a);return c.format(b)}function g(b){var a=void 0===b?da:b,e=(a-c.angle_min)/(c.angle_max-c.angle_min)*(c.value_max-c.value_min)+c.value_min;return d(e)}function h(a){return ca=a<c.value_min?c.value_min:a>c.value_max?c.value_max:a,i((a-c.value_min)/(c.value_max-c.value_min)*(c.angle_max-c.angle_min)+c.angle_min),!0}function i(a,b){var d=da,e=b&&a!==da;da=I(J(a,c.angle_min),c.angle_max),e&&g(d)!==g()&&u()}function j(a){i(I(J(da+a,c.angle_min),c.angle_max),!0)}function k(b){var d=c.zero_at-b;return 0>d&&(d+=360),d}function l(a){return(c.zero_at-a+360)%360}function m(a){var b=a.clientX-Y.left,d=a.clientY-Y.top,e=(b-$)/(Y.width/2),f=-(d-_)/(Y.width/2);c.rotation===Q&&(e=-e);var g=H(f,e);0>g&&(g=2*K+g),i(l(180*g/K),!0)}function n(a){a.preventDefault(),Y=M.getBoundingClientRect(),$=Y.width/2,_=$,document.addEventListener('mousemove',o,!1),document.addEventListener('mouseup',p,!1),m(a),G()}function o(a){a.preventDefault(),m(a),G()}function p(){document.removeEventListener('mousemove',o,!1),document.removeEventListener('mouseup',p,!1)}function q(a){var b=Math.abs;a.preventDefault();var d=a.deltaY;return 0!==d&&(Z>b(d)||!Z)&&(Z=b(d)),j(d/Z*ea*c.mouse_wheel_acceleration),G(),!1}function r(a){a.preventDefault(),Y=M.getBoundingClientRect(),$=Y.width/2,_=$,document.addEventListener('touchmove',s,{passive:!1}),document.addEventListener('touchend',t)}function s(a){a.preventDefault();var b=a.touches.length-1,d=a.touches[b].clientX-Y.left,e=a.touches[b].clientY-Y.top,f=(d-$)/(Y.width/2),g=-(e-_)/(Y.width/2);c.rotation===Q&&(f=-f);var h=H(g,f);0>h&&(h=2*K+h),i(l(180*h/K),!0),G()}function t(){document.removeEventListener('touchmove',s),document.removeEventListener('touchend',t)}function u(){var b=g(),d=new CustomEvent('change',{detail:b});a.dispatchEvent(d),c.onchange&&c.onchange(b)}function v(b,d){var e=b*K/180,a=void 0===d?c.track_radius:d,f=Math.cos(e)*a,g=Math.sin(e)*a;return{x:c.rotation===P?R+f:R-f,y:S-g}}function w(a,b,d){var e=k(a),f=k(b);a!==b&&(e-=1e-4,f+=1e-4);var g=v(e,d),h=g.x,i=g.y,j=v(f,d),l=j.x,m=j.y,n=(e-f+360)%360,o=180>n?0:1,p=c.rotation===P?1:0;return'M '+h+','+i+' A '+d+','+d+' 0 '+o+','+p+' '+l+','+m}function x(){var a=null;if(c.center_zero){if(g()===c.center_value)return a;180>da?a=w(I(da,aa),aa,c.track_radius):180<da&&(a=w(ba,J(da,ba),c.track_radius))}else a=w(c.angle_min,da,c.track_radius);return a}function y(){c.bg&&(fa=document.createElementNS(O,'circle'),fa.setAttributeNS(null,'cx',''+R),fa.setAttributeNS(null,'cy',''+S),fa.setAttributeNS(null,'r',''+c.bg_radius),fa.setAttribute('fill',''+c.bg_color),fa.setAttribute('stroke',''+c.bg_border_color),fa.setAttribute('stroke-width',''+c.bg_border_width),fa.setAttribute('class',c.class_bg),M.appendChild(fa))}function z(){if(c.markers){for(var b='',d=(c.angle_max-c.angle_min)/c.markers,e=c.angle_min;e<=c.angle_max;e+=d){var a=v(k(e),c.markers_radius),f=v(k(e),c.markers_radius+c.markers_length);b+='M '+a.x+','+a.y+' L '+f.x+','+f.y+' '}la=document.createElementNS(O,'path'),la.setAttributeNS(null,'d',b),la.setAttribute('stroke',''+c.markers_color),la.setAttribute('stroke-width',''+c.markers_width),la.setAttribute('stroke-linecap',c.linecap),la.setAttribute('class',c.class_markers),M.appendChild(la)}}function A(){c.track_bg&&(c.center_zero?(ha=document.createElementNS(O,'path'),ha.setAttributeNS(null,'d',w(c.angle_min,aa,c.track_bg_radius)),ha.setAttribute('stroke',''+c.track_bg_color),ha.setAttribute('stroke-width',''+c.track_bg_width),ha.setAttribute('stroke-linecap',c.linecap),ha.setAttribute('fill','transparent'),ha.setAttribute('class',c.class_track_bg),M.appendChild(ha),ia=document.createElementNS(O,'path'),ia.setAttributeNS(null,'d',w(ba,c.angle_max,c.track_bg_radius)),ia.setAttribute('stroke',''+c.track_bg_color),ia.setAttribute('stroke-width',''+c.track_bg_width),ia.setAttribute('stroke-linecap',c.linecap),ia.setAttribute('fill','transparent'),ia.setAttribute('class',c.class_track_bg),M.appendChild(ia)):(ga=document.createElementNS(O,'path'),ga.setAttributeNS(null,'d',w(c.angle_min,c.angle_max,c.track_bg_radius)),ga.setAttribute('stroke',''+c.track_bg_color),ga.setAttribute('stroke-width',''+c.track_bg_width),ga.setAttribute('fill','transparent'),ga.setAttribute('stroke-linecap',c.linecap),ga.setAttribute('class',c.class_track_bg),M.appendChild(ga)))}function B(){if(c.track){var a=x();a&&(ja=document.createElementNS(O,'path'),ja.setAttributeNS(null,'d',a),ja.setAttribute('stroke',''+c.track_color_init),ja.setAttribute('stroke-width',''+c.track_width),ja.setAttribute('fill','transparent'),ja.setAttribute('stroke-linecap',c.linecap),ja.setAttribute('class',c.class_track),M.appendChild(ja))}}function C(){var b=k(da),a=v(b,c.cursor_radius),d=v(b,c.cursor_radius+c.cursor_length);return'M '+a.x+','+a.y+' L '+d.x+','+d.y}function D(){if(c.cursor){var a=C();a&&(ka=document.createElementNS(O,'path'),ka.setAttributeNS(null,'d',a),ka.setAttribute('stroke',''+c.cursor_color_init),ka.setAttribute('stroke-width',''+c.cursor_width),ka.setAttribute('fill','transparent'),ka.setAttribute('stroke-linecap',c.linecap),ka.setAttribute('class',c.class_cursor),M.appendChild(ka))}}function E(){c.value_text&&(ma=document.createElementNS(O,'text'),ma.setAttributeNS(null,'x',''+R),ma.setAttributeNS(null,'y',''+c.value_position),ma.setAttribute('text-anchor','middle'),ma.setAttribute('cursor','default'),ma.setAttribute('font-family',c.font_family),ma.setAttribute('font-size',''+c.font_size),ma.setAttribute('font-weight',''+c.font_weight),ma.setAttribute('fill',c.font_color),ma.setAttribute('class',c.class_value),ma.textContent=f(),M.appendChild(ma))}function F(){y(),A(),z(),B(),D(),E()}function G(){var a=x();a?ja?ja.setAttributeNS(null,'d',a):B():ja&&ja.setAttributeNS(null,'d',''),na||(na=g()!==c.default_value,na&&ja&&ja.setAttribute('stroke',''+c.track_color)),a=C(),a&&ka&&(ka.setAttributeNS(null,'d',a),na&&ka.setAttribute('stroke',''+c.cursor_color)),ma&&(ma.textContent=f())}var H=Math.atan2,I=Math.min,J=Math.max,K=Math.PI,L=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!a)throw'You must pass a DOM node reference to the Knob constructor';var M,N=!1,O='http://www.w3.org/2000/svg',P=!0,Q=!P,R=50,S=50;('string'==typeof a||a instanceof String)&&(a=document.querySelector(a)),'svg'===a.nodeName.toLowerCase()?M=a:(M=document.createElementNS('http://www.w3.org/2000/svg','svg'),a.appendChild(M));var T,U=void 0!==a.dataset.label&&a.dataset.label,V={label:!1,rotation:P,default_value:0,initial_value:0,value_min:0,value_max:100,value_resolution:1,center_zero:!1,center_value:null,center_gap:4,zero_at:270,angle_min:30,angle_max:330,bg_radius:32,bg_border_width:1,track_bg_radius:40,track_bg_width:8,track_radius:40,track_width:8,cursor_radius:18,cursor_length:10,cursor_width:4,palette:'light',bg:!1,track_bg:!0,track:!0,cursor:!1,linecap:'butt',value_text:!0,value_position:S+8,format:function(a){return a},font_family:'sans-serif',font_size:25,font_weight:'bold',markers:0,markers_radius:40,markers_length:8,markers_width:2,class_bg:'knob-bg',class_track_bg:'knob-track-bg',class_track:'knob-track',class_value:'knob-value',class_cursor:'knob-cursor',class_markers:'knob-markers',snap_to_steps:!1,mouse_wheel_acceleration:1,onchange:null},W=JSON.parse(a.dataset.config||'{}'),X=Object.assign({},V,e.default[V.palette],L,W),c=Object.assign(X,e.default[X.palette],L,W);T=c.label||c.value_position>=100-c.font_size/2?120:100,M.setAttributeNS('http://www.w3.org/2000/xmlns/','xmlns:xlink','http://www.w3.org/1999/xlink'),M.setAttributeNS(null,'viewBox','0 0 '+100+' '+T);var Y,Z,$=0,_=0,aa=0,ba=0,ca=0,da=c.angle_min,ea=1,fa=null,ga=null,ha=null,ia=null,ja=null,ka=null,la=null,ma=null,na=!1;return b(),F(),function(){M.addEventListener('mousedown',function(a){n(a)}),M.addEventListener('wheel',function(a){q(a)}),M.addEventListener('touchstart',r,{passive:!1})}(),{set value(a){h(a),G()},set config(a){c=Object.assign({},V,L,a),b(),F()},enableDebug:function(){N=!0},disableDebug:function(){N=!1}}};var d=c(1),e=function(a){return a&&a.__esModule?a:{default:a}}(d)},function(a,b){'use strict';Object.defineProperty(b,'__esModule',{value:!0}),b.default={light:{bg_color:'#E0E0E0',bg_border_color:'#BDBDBD',track_bg_color:'#CFD8DC',track_color_init:'#64B5F6',track_color:'#42A5F5',cursor_color_init:'#64B5F6',cursor_color:'#42A5F5',markers_color:'#9E9E9E',font_color:'#424242'},light2:{bg_color:'#B1DAEE',bg_border_color:'#569DC0',track_bg_color:'#B1DAEE',track_color_init:'#569DC0',track_color:'#1D6D93',cursor_color_init:'#569DC0',cursor_color:'#1D6D93',markers_color:'#3680A4',font_color:'#1D6D93'},dark:{bg_color:'#000000',bg_border_color:'#569DC0',track_bg_color:'#424242',track_color_init:'#FDD835',track_color:'#FFEC00',cursor_color_init:'#569DC0',cursor_color:'#FDD835',markers_color:'#3680A4',font_color:'#FFEA00'}}}])});